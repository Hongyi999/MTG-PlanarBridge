/* Library Page Styles — matching React library.tsx */

.lib-page {
  background: #f7f4f0;
  min-height: 100vh;
  padding-bottom: 40rpx;
}

/* Header */
.lib-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 32rpx 32rpx 16rpx;
}

.lib-title {
  font-size: 40rpx;
  font-weight: 700;
  color: #1a1a0a;
}

.filter-sheet-btn {
  display: flex;
  align-items: center;
  gap: 8rpx;
  padding: 12rpx 24rpx;
  border-radius: 16rpx;
  border: 1rpx solid rgba(139,105,20,0.25);
  background: rgba(255,255,255,0.6);
  position: relative;
}

.filter-sheet-btn.filter-active {
  border-color: #8b6914;
  background: rgba(139,105,20,0.08);
}

.filter-sheet-btn-icon { font-size: 24rpx; color: #8b6914; }
.filter-sheet-btn-text { font-size: 24rpx; color: #8b6914; font-weight: 500; }

.filter-dot {
  position: absolute;
  top: -6rpx;
  right: -6rpx;
  width: 16rpx;
  height: 16rpx;
  border-radius: 50%;
  background: #ea580c;
}

/* Search */
.lib-search-wrap {
  padding: 0 32rpx 24rpx;
}

.lib-search-bar {
  display: flex;
  align-items: center;
  background: rgba(255,255,255,0.7);
  border: 1rpx solid rgba(139,105,20,0.2);
  border-radius: 24rpx;
  padding: 20rpx 28rpx;
  gap: 16rpx;
}

.lib-search-input {
  flex: 1;
  font-size: 28rpx;
  color: #1a1a0a;
  background: transparent;
}

.lib-search-clear {
  font-size: 28rpx;
  color: #8a7a5a;
  padding: 4rpx 8rpx;
}

.lib-search-submit { display: flex; align-items: center; }
.lib-search-filter-icon { font-size: 32rpx; color: #8b6914; }

/* Results row */
.results-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32rpx 16rpx;
}

.results-count {
  font-size: 24rpx;
  color: #8a7a5a;
}

.page-prev-btn {
  padding: 10rpx 20rpx;
  border-radius: 12rpx;
  border: 1rpx solid rgba(139,105,20,0.25);
  background: rgba(255,255,255,0.6);
}

.page-prev-btn text {
  font-size: 24rpx;
  color: #8b6914;
}

/* Loading */
.lib-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 80rpx 0;
  gap: 24rpx;
}

.lib-spinner {
  width: 48rpx;
  height: 48rpx;
  border: 4rpx solid rgba(139,105,20,0.2);
  border-top: 4rpx solid #8b6914;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

.lib-loading-text {
  font-size: 26rpx;
  color: #8a7a5a;
}

/* Empty state */
.lib-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 80rpx 48rpx;
  gap: 16rpx;
}

.lib-empty-icon { font-size: 64rpx; color: #c4b89a; }
.lib-empty-title { font-size: 28rpx; color: #8a7a5a; text-align: center; font-weight: 500; }
.lib-empty-sub { font-size: 24rpx; color: #a89a7a; text-align: center; }

/* Card Grid — 2 columns */
.card-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24rpx;
  padding: 0 24rpx;
}

.card-grid-item {
  background: #ffffff;
  border-radius: 20rpx;
  border: 1rpx solid #e8e0d4;
  overflow: hidden;
  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.06);
}

.card-grid-item:active { opacity: 0.85; }

/* FAB pitch borders */
.fab-border-pitch-red   { border: 2rpx solid #dc2626; }
.fab-border-pitch-yellow { border: 2rpx solid #ca8a04; }
.fab-border-pitch-blue  { border: 2rpx solid #1d4ed8; }

/* Card image */
.card-img-wrap {
  width: 100%;
  aspect-ratio: 5 / 7;
  position: relative;
  overflow: hidden;
  background: #e8e0d4;
}

.card-img {
  width: 100%;
  height: 100%;
}

.card-img-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #e8e0d4, #d4c8b0);
}

.card-img-ph-text {
  font-size: 28rpx;
  font-weight: 700;
  color: #a89a7a;
  letter-spacing: 2rpx;
}

/* Card info */
.card-info {
  padding: 16rpx;
  display: flex;
  flex-direction: column;
  gap: 8rpx;
}

.card-name {
  font-size: 24rpx;
  font-weight: 600;
  color: #1a1a0a;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}

.fab-badges {
  display: flex;
  gap: 8rpx;
  flex-wrap: wrap;
}

.fab-badge {
  font-size: 18rpx;
  padding: 4rpx 10rpx;
  border-radius: 8rpx;
  background: rgba(139,105,20,0.1);
  color: #8b6914;
  font-weight: 500;
}

.card-meta {
  display: flex;
  align-items: center;
  gap: 12rpx;
}

.card-set {
  font-size: 20rpx;
  color: #8a7a5a;
  font-family: 'Menlo', monospace;
}

.card-rarity {
  font-size: 20rpx;
  font-weight: 500;
}

.card-price {
  font-size: 24rpx;
  font-weight: 700;
  color: #8b6914;
  font-family: 'Menlo', monospace;
}

/* Load more */
.load-more-row {
  display: flex;
  justify-content: center;
  padding: 32rpx 0 16rpx;
}

.load-more-btn {
  padding: 20rpx 64rpx;
  border-radius: 16rpx;
  border: 1rpx solid rgba(139,105,20,0.3);
  background: rgba(255,255,255,0.7);
  font-size: 28rpx;
  color: #8b6914;
  font-weight: 500;
}

.load-more-btn:active { background: rgba(139,105,20,0.08); }

/* Loading more */
.lib-loading-more {
  display: flex;
  justify-content: center;
  padding: 24rpx 0;
}

/* ===== Advanced Filter Bottom Sheet ===== */
.sheet-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.45);
  z-index: 200;
  display: flex;
  align-items: flex-end;
}

.sheet-content {
  width: 100%;
  background: #faf8f5;
  border-radius: 32rpx 32rpx 0 0;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.sheet-handle {
  width: 80rpx;
  height: 8rpx;
  border-radius: 4rpx;
  background: #d4c8b0;
  margin: 20rpx auto 0;
}

.sheet-header {
  padding: 24rpx 32rpx 16rpx;
  border-bottom: 1rpx solid #e8e0d4;
}

.sheet-title {
  font-size: 32rpx;
  font-weight: 700;
  color: #1a1a0a;
}

.sheet-body {
  flex: 1;
  overflow: hidden;
}

/* Filter groups */
.filter-group {
  padding: 24rpx 32rpx 0;
}

.filter-group-label {
  display: block;
  font-size: 24rpx;
  font-weight: 600;
  color: #8a7a5a;
  margin-bottom: 12rpx;
  letter-spacing: 0.5rpx;
}

.filter-input {
  width: 100%;
  background: #ffffff;
  border: 1rpx solid #e8e0d4;
  border-radius: 16rpx;
  padding: 20rpx 24rpx;
  font-size: 28rpx;
  color: #1a1a0a;
  box-sizing: border-box;
}

/* Rarity */
.rarity-grid {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: #ffffff;
  border: 1rpx solid #e8e0d4;
  border-radius: 16rpx;
  overflow: hidden;
}

.rarity-row {
  display: flex;
  align-items: center;
  gap: 20rpx;
  padding: 20rpx 24rpx;
  border-bottom: 1rpx solid #f0ebe3;
}

.rarity-row:last-child { border-bottom: none; }
.rarity-row:active { background: rgba(139,105,20,0.04); }

.rarity-check {
  width: 36rpx;
  height: 36rpx;
  border-radius: 8rpx;
  border: 2rpx solid #d4c8b0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.rarity-checked {
  background: #8b6914;
  border-color: #8b6914;
}

.rarity-check-mark {
  font-size: 20rpx;
  color: #ffffff;
  font-weight: 700;
}

.rarity-dot {
  width: 20rpx;
  height: 20rpx;
  border-radius: 50%;
  flex-shrink: 0;
}

.rarity-label {
  font-size: 26rpx;
  color: #1a1a0a;
}

/* Color picker */
.color-picker-row {
  display: flex;
  gap: 16rpx;
  flex-wrap: wrap;
}

.color-circle {
  width: 72rpx;
  height: 72rpx;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 3rpx solid transparent;
  box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.15);
}

.color-selected {
  border-color: #1a1a0a;
  box-shadow: 0 0 0 4rpx rgba(26,26,10,0.25);
}

.color-label {
  font-size: 22rpx;
  font-weight: 700;
}

.color-label-light { color: #ffffff; }
.color-label-dark  { color: #1a1a0a; }

/* CMC row */
.cmc-row {
  display: flex;
  align-items: center;
  gap: 16rpx;
}

.cmc-op-picker { flex-shrink: 0; }

.cmc-op-btn {
  padding: 20rpx 24rpx;
  background: #ffffff;
  border: 1rpx solid #e8e0d4;
  border-radius: 16rpx;
  font-size: 28rpx;
  color: #1a1a0a;
  min-width: 100rpx;
  text-align: center;
}

.cmc-val-input {
  flex: 1;
  background: #ffffff;
  border: 1rpx solid #e8e0d4;
  border-radius: 16rpx;
  padding: 20rpx 24rpx;
  font-size: 28rpx;
  color: #1a1a0a;
}

/* Format / Lang picker */
.format-picker, .lang-picker {
  width: 100%;
}

.format-picker-btn {
  width: 100%;
  background: #ffffff;
  border: 1rpx solid #e8e0d4;
  border-radius: 16rpx;
  padding: 20rpx 24rpx;
  font-size: 28rpx;
  color: #1a1a0a;
  box-sizing: border-box;
}

/* Sheet footer */
.sheet-footer {
  display: flex;
  gap: 16rpx;
  padding: 20rpx 32rpx 40rpx;
  border-top: 1rpx solid #e8e0d4;
  background: #faf8f5;
}

.sheet-reset-btn {
  flex: 1;
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 20rpx;
  border: 1rpx solid #d4c8b0;
  background: #ffffff;
  font-size: 28rpx;
  color: #8a7a5a;
  font-weight: 500;
}

.sheet-reset-btn:active { background: #f0ebe3; }

.sheet-apply-btn {
  flex: 2;
  height: 88rpx;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 20rpx;
  background: #8b6914;
  font-size: 28rpx;
  color: #ffffff;
  font-weight: 600;
}

.sheet-apply-btn:active { background: #7a5c10; }
