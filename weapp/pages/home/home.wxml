<view class="page-home">

  <!-- ===== é¡¶éƒ¨æ ‡é¢˜æ  ===== -->
  <view class="page-header">
    <text class="page-title">å‘ç°</text>
  </view>

  <!-- ===== æœç´¢æ¡† ===== -->
  <view class="px-container">
    <view class="search-bar">
      <text class="search-icon">ğŸ”</text>
      <input
        class="search-input"
        type="text"
        placeholder="æœç´¢å¡ç‰Œã€ç³»åˆ—æˆ–è§„åˆ™..."
        placeholder-style="color: #8a7a5a; font-size: 28rpx;"
        value="{{searchQuery}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
        confirm-type="search"
      />
    </view>
  </view>

  <!-- ===== å¿«é€Ÿå…¥å£ ===== -->
  <view class="quick-actions px-container">
    <view class="action-card" bindtap="goPriceLists">
      <view class="action-icon-box action-icon-primary">
        <text style="font-size: 36rpx;">ğŸ“‹</text>
      </view>
      <view style="flex: 1;">
        <text class="action-title">ä»·æ ¼åˆ—è¡¨</text>
        <text class="action-desc">ç®¡ç†ä¸å¯¼å‡º</text>
      </view>
      <text style="color: #8a7a5a; font-size: 32rpx;">â€º</text>
    </view>
    <view class="action-card" bindtap="goHistory">
      <view class="action-icon-box action-icon-orange">
        <text style="font-size: 36rpx;">ğŸ•</text>
      </view>
      <view style="flex: 1;">
        <text class="action-title">æµè§ˆè¶³è¿¹</text>
        <text class="action-desc">æŸ¥è¯¢å†å²</text>
      </view>
      <text style="color: #8a7a5a; font-size: 32rpx;">â€º</text>
    </view>
  </view>

  <!-- ===== å¸‚åœºåŠ¨å‘ ===== -->
  <view class="section px-container">
    <view class="section-header">
      <text style="font-size: 32rpx; margin-right: 8rpx;">ğŸ“ˆ</text>
      <text class="section-title">å¸‚åœºåŠ¨å‘ (CN)</text>
    </view>

    <view wx:if="{{hotLoading}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view wx:elif="{{hotCards.length === 0}}" class="empty-state" style="padding: 48rpx 0;">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">æš‚æ— æ•°æ®ï¼Œä¸‹æ‹‰åˆ·æ–°é‡è¯•</text>
    </view>

    <view wx:else>
      <view
        wx:for="{{hotCards}}"
        wx:key="id"
        class="market-row"
        data-id="{{item.id}}"
        bindtap="onCardTap"
      >
        <image class="market-avatar" src="{{item.image}}" mode="aspectFill" lazy-load />
        <view class="market-info">
          <text class="market-name-cn">{{item.nameCn || item.nameEn}}</text>
          <text class="market-name-en">{{item.nameEn}}</text>
        </view>
        <view class="market-price-col">
          <text class="market-price-cny">{{item.priceCny ? 'Â¥' + item.priceCny : '--'}}</text>
          <text class="market-price-usd">{{item.priceUsd ? '$' + item.priceUsd : ''}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ===== ç¤¾åŒºçƒ­é—¨ ===== -->
  <view class="section">
    <view class="section-header px-container">
      <text style="font-size: 32rpx; margin-right: 8rpx;">ğŸ”¥</text>
      <text class="section-title">ç¤¾åŒºçƒ­é—¨</text>
    </view>

    <view wx:if="{{recentLoading}}" class="loading-container">
      <view class="loading-spinner"></view>
    </view>

    <scroll-view wx:else scroll-x class="card-h-scroll" show-scrollbar="{{false}}">
      <view class="card-h-inner">
        <view
          wx:for="{{recentCards}}"
          wx:key="id"
          class="h-card"
          data-id="{{item.id}}"
          bindtap="onCardTap"
        >
          <image class="h-card-image" src="{{item.image}}" mode="aspectFill" lazy-load />
          <view class="h-card-info">
            <text class="h-card-name">{{item.nameCn || item.nameEn}}</text>
            <text class="h-card-price">{{item.priceCny ? 'Â¥' + item.priceCny : '--'}}</text>
          </view>
        </view>
        <view wx:if="{{recentCards.length === 0}}" class="h-card-empty">
          <text style="color: #8a7a5a; font-size: 24rpx;">æš‚æ— æ•°æ®</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- ===== èµ›åˆ¶å¿«é€Ÿå…¥å£ ===== -->
  <view class="section px-container">
    <view class="section-header">
      <text style="font-size: 32rpx; margin-right: 8rpx;">âš¡</text>
      <text class="section-title">å¿«é€Ÿèµ›åˆ¶</text>
    </view>
    <view class="format-grid">
      <view
        wx:for="{{formats}}"
        wx:key="key"
        class="format-cell"
        data-query="{{item.query}}"
        bindtap="onFormatTap"
      >
        <text class="format-cell-label">{{item.name}}</text>
      </view>
    </view>
  </view>

  <view style="height: 32rpx;"></view>

</view>
