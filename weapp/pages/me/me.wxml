<view class="page-me">
  <!-- Profile Header -->
  <view class="profile-header">
    <view wx:if="{{isLoggedIn && userInfo}}" class="profile-info">
      <image
        class="profile-avatar"
        src="{{userInfo.avatar}}"
        wx:if="{{userInfo.avatar}}"
      />
      <view wx:else class="profile-avatar profile-avatar-placeholder">
        <text style="font-size: 56rpx; color: #c9a96e;">◉</text>
      </view>
      <view class="profile-details">
        <text class="profile-name">{{userInfo.username || userInfo.wechatNickname || 'User'}}</text>
        <text class="profile-id" wx:if="{{userInfo.phone}}">{{userInfo.phone}}</text>
      </view>
    </view>

    <view wx:else class="profile-login-prompt">
      <view class="profile-avatar profile-avatar-placeholder">
        <text style="font-size: 56rpx; color: #5a5a6a;">◉</text>
      </view>
      <view class="profile-details">
        <text class="profile-name" style="color: #8a8a9a;">Not logged in</text>
        <text class="profile-login-link" bindtap="goLogin">Log in →</text>
      </view>
    </view>
  </view>

  <!-- Stats Bar -->
  <view class="stats-bar">
    <view class="stat-item">
      <text class="stat-number">{{followedCount}}</text>
      <text class="stat-label">Following</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-number">{{priceListCount}}</text>
      <text class="stat-label">Lists</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-number">{{historyCount}}</text>
      <text class="stat-label">History</text>
    </view>
  </view>

  <!-- Menu Items -->
  <view class="container">
    <view class="menu-section">
      <view
        wx:for="{{menuItems}}"
        wx:key="key"
        class="menu-item"
        data-key="{{item.key}}"
        bindtap="onMenuTap"
      >
        <text class="menu-icon">{{item.icon}}</text>
        <view class="menu-info">
          <text class="menu-label">{{item.label}}</text>
          <text class="menu-desc">{{item.desc}}</text>
        </view>
        <text class="menu-arrow">›</text>
      </view>
    </view>

    <!-- Logout Button -->
    <view wx:if="{{isLoggedIn}}" class="logout-section">
      <view class="btn-outline" style="width: 100%; text-align: center;" bindtap="onLogout">
        Log Out
      </view>
    </view>

    <!-- About -->
    <view class="about-section">
      <text class="about-text">PlanarBridge v1.0</text>
      <text class="about-text">MTG & FAB Card Price Tracker</text>
      <text class="about-text" style="margin-top: 8rpx;">
        Card data: Scryfall · TCGTracking · TCGCSV
      </text>
    </view>
  </view>
</view>
